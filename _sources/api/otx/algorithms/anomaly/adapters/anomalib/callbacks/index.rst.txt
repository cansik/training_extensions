:py:mod:`otx.algorithms.anomaly.adapters.anomalib.callbacks`
============================================================

.. py:module:: otx.algorithms.anomaly.adapters.anomalib.callbacks

.. autoapi-nested-parse::

   Callbacks for OTX inference.



Submodules
----------
.. toctree::
   :titlesonly:
   :maxdepth: 1

   inference/index.rst
   progress/index.rst
   score_report/index.rst


Package Contents
----------------

Classes
~~~~~~~

.. autoapisummary::

   otx.algorithms.anomaly.adapters.anomalib.callbacks.AnomalyInferenceCallback
   otx.algorithms.anomaly.adapters.anomalib.callbacks.ProgressCallback
   otx.algorithms.anomaly.adapters.anomalib.callbacks.ScoreReportingCallback




.. py:class:: AnomalyInferenceCallback(otx_dataset: otx.api.entities.datasets.DatasetEntity, labels: List[otx.api.entities.label.LabelEntity], task_type: otx.api.entities.model_template.TaskType)

   Bases: :py:obj:`pytorch_lightning.callbacks.Callback`

   Callback that updates the OTX dataset during inference.

   .. py:method:: on_predict_epoch_end(_trainer: pytorch_lightning.Trainer, pl_module: anomalib.models.AnomalyModule, outputs: List[Any])

      Call when the predict epoch ends.



.. py:class:: ProgressCallback(parameters: Optional[Union[otx.api.entities.train_parameters.TrainParameters, otx.api.entities.inference_parameters.InferenceParameters, otx.api.entities.optimization_parameters.OptimizationParameters]] = None)

   Bases: :py:obj:`pytorch_lightning.callbacks.progress.TQDMProgressBar`

   Progress Callback.

   Modify progress callback to show completion of the entire training step.

   .. py:method:: on_train_start(trainer, pl_module)

      Store max epochs and current epoch from trainer.


   .. py:method:: on_predict_start(trainer, pl_module)

      Reset progress bar when prediction starts.


   .. py:method:: on_test_start(trainer, pl_module)

      Reset progress bar when testing starts.


   .. py:method:: on_train_batch_end(trainer, pl_module, outputs, batch, batch_idx)

      Adds training completion percentage to the progress bar.


   .. py:method:: on_predict_batch_end(trainer, pl_module, outputs, batch, batch_idx, dataloader_idx)

      Adds prediction completion percentage to the progress bar.


   .. py:method:: on_test_batch_end(trainer, pl_module, outputs, batch, batch_idx, dataloader_idx)

      Adds testing completion percentage to the progress bar.


   .. py:method:: _reset_progress()


   .. py:method:: _get_progress(stage: str = 'train') -> float

      Get progress for train and test stages.

      :param stage: Train or Test stages. Defaults to "train".
      :type stage: str, optional


   .. py:method:: _update_progress(stage: str)



.. py:class:: ScoreReportingCallback(parameters: Optional[otx.api.entities.train_parameters.TrainParameters] = None)

   Bases: :py:obj:`pytorch_lightning.Callback`

   Callback for reporting score.

   .. py:method:: on_validation_epoch_end(trainer, pl_module)

      If score exists in trainer.logged_metrics, report the score.



