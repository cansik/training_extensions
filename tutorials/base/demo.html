
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to run the demo with exportable code &#8212; OpenVINO Training Extensions  documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Advanced tutorial" href="../advanced/index.html" />
    <link rel="prev" title="How to deploy the model" href="deploy.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/otx-logo-black-mini.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Base tutorial
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="how_to_train/index.html">
     How to train, validate, export and optimize the model
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="how_to_train/classification.html">
       Classification  model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="how_to_train/detection.html">
       Object Detection model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="how_to_train/instance_segmentation.html">
       Instance Segmentation model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="how_to_train/semantic_segmentation.html">
       Semantic Segmentation model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="how_to_train/anomaly_detection.html">
       Anomaly Classification model
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="deploy.html">
     How to deploy the model
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     How to run the demo with exportable code
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../advanced/index.html">
   Advanced tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../advanced/semi_sl.html">
     Use Semi-Supervised Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../advanced/backbones.html">
     Backbone Replacement
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../advanced/datumaro.html">
     Convert a custom user dataset with Datumaro
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#troubleshooting">
   Troubleshooting
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="how-to-run-the-demo-with-exportable-code">
<h1>How to run the demo with exportable code<a class="headerlink" href="#how-to-run-the-demo-with-exportable-code" title="Permalink to this headline">Â¶</a></h1>
<p>In this tutorial we will show how run <a class="reference internal" href="how_to_train/index.html"><span class="doc">trained</span></a> and <a class="reference internal" href="deploy.html"><span class="doc">deployed</span></a> model in demostrarion mode. It allows us to apply our model on the custom data or the online footage from a web camera and see how it will work in the real-life scenario.</p>
<ol class="arabic simple">
<li><p>Unzip the <code class="docutils literal notranslate"><span class="pre">openvino.zip</span></code> archive.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unzip</span>  <span class="n">outputs</span><span class="o">/</span><span class="n">deploy</span><span class="o">/</span><span class="n">openvino</span><span class="o">.</span><span class="n">zip</span> <span class="o">-</span><span class="n">d</span> <span class="n">outputs</span><span class="o">/</span><span class="n">deploy</span><span class="o">/</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>To run the demo in exportable code, we can use a brand-new virtual environment, where we need to install a minimalistic set of packages required for inference only.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">demo_venv</span> <span class="o">--</span><span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;demo&quot;</span>
<span class="n">source</span> <span class="n">demo_venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>The following line will run the demo on your input source, using the model in the <code class="docutils literal notranslate"><span class="pre">model</span></code> folder. You can pass as <code class="docutils literal notranslate"><span class="pre">input</span></code> a single image, a folder of images, a video file, or a web camera id.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(demo) ...$ python3 outputs/deploy/python/demo.py --input docs/utils/images/wgisd_dataset_sample.jpg \
                                                  --models outputs/deploy/model
</pre></div>
</div>
<p>You can press <code class="docutils literal notranslate"><span class="pre">Q</span></code> to stop inference during the demo running.</p>
<p>The model inference on your custom image will look like this:</p>
<a class="reference internal image-reference" href="../../_images/wgisd_pr_sample.jpg"><img alt="this image shows the inference results on the WGISD dataset" src="../../_images/wgisd_pr_sample.jpg" style="width: 600px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you provide a single image as input, the demo processes and renders it quickly, then exits. To continuously
visualize inference results on the screen, apply the <code class="docutils literal notranslate"><span class="pre">loop</span></code> option, which enforces processing a single image in a loop.
In this case, you can stop the demo by killing the process in the terminal (<code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> for Linux).</p>
</div>
<p>To learn how to run the demo on Windows and MacOS, please refer to the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file in exportable code.</p>
<ol class="arabic simple" start="4">
<li><p>To run a demo on a web camera, we need to know its ID. We can check a list of camera devices by running this command line on Linux system:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">v4l</span><span class="o">-</span><span class="n">utils</span>
<span class="n">v4l2</span><span class="o">-</span><span class="n">ctl</span> <span class="o">--</span><span class="nb">list</span><span class="o">-</span><span class="n">devices</span>
</pre></div>
</div>
<p>The output will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Integrated</span> <span class="n">Camera</span> <span class="p">(</span><span class="n">usb</span><span class="o">-</span><span class="mi">0000</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">1</span><span class="n">a</span><span class="mf">.0</span><span class="o">-</span><span class="mf">1.6</span><span class="p">):</span>
    <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">video0</span>
</pre></div>
</div>
<p>After that, we can use this <code class="docutils literal notranslate"><span class="pre">/dev/video0</span></code> as a camera ID for <code class="docutils literal notranslate"><span class="pre">--input</span></code>.</p>
<ol class="arabic simple" start="5">
<li><p>We can also change <code class="docutils literal notranslate"><span class="pre">config.json</span></code> that specifies the confidence threshold and color for each class visualization, but any changes should be made with caution.</p></li>
</ol>
<p>For example, in our image of the winery we see, that a lot of objects werenât detected.
The original confidence threshold was chosen based on the validation split results to maximize the final F1 metric, balancing precision and recall values. So, visual results can be not suitable enough for a user.
To overcome this problem, we can decrease <code class="docutils literal notranslate"><span class="pre">confidence_threshold</span></code> in <code class="docutils literal notranslate"><span class="pre">config.json</span> <span class="pre">file</span></code> from <strong>0.4</strong> to <strong>0.3</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;model_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;result_based_confidence_threshold&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;confidence_threshold&quot;</span><span class="p">:</span> <span class="mf">0.3000000059604645</span><span class="p">,</span>
</pre></div>
</div>
<p>For visual purposes, we can also update the color of <code class="docutils literal notranslate"><span class="pre">Chardonnay</span></code> class from yellow to lilac to make it more distinguishable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;all_labels&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Chardonnay&quot;</span><span class="p">,</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;red&quot;</span><span class="p">:</span> <span class="mi">230</span><span class="p">,</span>
             <span class="s2">&quot;green&quot;</span><span class="p">:</span> <span class="mi">106</span><span class="p">,</span>
             <span class="s2">&quot;blue&quot;</span><span class="p">:</span> <span class="mi">226</span><span class="p">,</span>
</pre></div>
</div>
<p>The result will be the following:</p>
<a class="reference internal image-reference" href="../../_images/wgisd_pr2_sample.jpg"><img alt="this image shows the inference results on the WGISD dataset" src="../../_images/wgisd_pr2_sample.jpg" style="width: 600px;" /></a>
<p>Congratulations! Now you have learned how to use base OTX functionality. For the advanced features, please refer to the next section called <a class="reference internal" href="../advanced/index.html"><span class="doc">Advanced tutorial</span></a>.</p>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li><p>If you have access to the Internet through the proxy server only, please use pip with a proxy call as demonstrated by the command below:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">proxy</span> <span class="n">http</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">usr_name</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;@&lt;</span><span class="n">proxyserver_name</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">port</span><span class="c1">#&gt; &lt;pkg_name&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>If you use Anaconda environment, you should consider that OpenVINO has limited <a class="reference external" href="https://docs.openvino.ai/2021.4/openvino_docs_install_guides_installing_openvino_conda.html">Conda support</a> for Python 3.6 and 3.7 versions only. But the demo package requires python 3.8.</p></li>
</ol>
<p>So please use other tools to create the environment (like <code class="docutils literal notranslate"><span class="pre">venv</span></code> or <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>) and use <code class="docutils literal notranslate"><span class="pre">pip</span></code> as a package manager.</p>
<ol class="arabic simple" start="3">
<li><p>If you have problems when you try to use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> command, please update the pip version by the following command:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>
</pre></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="deploy.html" title="previous page">How to deploy the model</a>
    <a class='right-next' id="next-link" href="../advanced/index.html" title="next page">Advanced tutorial</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, OpenVINO Training Extensions Contributors.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>